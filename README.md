# parsing_speakers_kant_v2.0

Telegram-бот для поиска спикеров KANT по сезонам и регионам с использованием GPT-5.3-Codex.

## Быстрый старт (локально)

1. Создайте и активируйте виртуальное окружение.
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

3. Скопируйте `.env.example` в `.env` и заполните переменные.
4. Запустите бота:

```bash
python app.py
```

По умолчанию бот пытается запуститься в режиме webhook. Если webhook не удаётся, он переходит на polling.

## Деплой на Railway

1. Создайте новый сервис и подключите репозиторий.
2. Установите переменные окружения из `.env.example` в Railway.
3. Укажите публичный `WEBHOOK_URL` вида `https://<project>.up.railway.app/webhook`.
4. Railway автоматически выставит `PORT`.
5. Запустите деплой.

## Команды

- `/start` — приветствие и подсказки.
- `/topics` — сезон и регион с подсказками.
- `/find_speakers <сезон> <регион>` — запуск поиска.

## Skills for AI agents

Этот проект использует подход «skills» для настройки поведения AI‑модели и Telegram‑бота.

Навыки лежат в папке `skills/`:

- `skills/find-speakers-core.md`  
  Базовый навык поиска спикеров KANT по сезону (зима/лето) и региону (Екатеринбург → Россия).  
  Описывает входные параметры, формат JSON‑ответа и общую логику подбора спикеров.

- `skills/find-speakers-winter.md`  
  Специализация для зимних видов спорта: беговые и горные лыжи, сноуборд, зимний бег, подготовка к зимнему сезону.

- `skills/find-speakers-summer.md`  
  Специализация для летних видов спорта: шоссе‑бег, трейл, триатлон, ОФП для бегунов и подготовка к летним стартам.

- `skills/find-speakers-geo-urals.md`  
  Стратегия расширения радиуса поиска: от Екатеринбурга к Свердловской области, УрФО и всей России, с отражением фактического `location_scope` в ответе.

- `skills/speakers-copy.md`  
  Правила превращения JSON‑списка спикеров в аккуратное, читаемое сообщение для Telegram (заголовок, структура, форматирование).

- `skills/no-speakers-fallback.md`  
  Ответы бота, если подходящих спикеров не найдено: вежливые объяснения и предложения, как изменить запрос (сезон, регион, вид спорта).

- `skills/agent-telegram-bot.md`  
  Роль Telegram‑бота parsing_speakers_kant_v2, его команды (`/start`, `/topics`, `/find_speakers`) и то, как он комбинирует все навыки.



Пример:

```
/find_speakers зима Екатеринбург
```
